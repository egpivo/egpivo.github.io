<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Using Bioconductor in a Conda Environment</title>
  <meta name="description" content="I recently switched over to using the conda package management system for R. One of the benefits of conda is that package installation can be performed very ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/syntax-style.css">
  <link rel="stylesheet" href="/css/site.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="canonical" href="http://localhost:4000/2016/11/12/bioconductor-conda.html">
  <link rel="alternate" type="application/rss+xml" title="Wen-Ting Wang's Blog" href="http://localhost:4000/feed.xml" />

  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script type="text/javascript" src="/js/jquery-1.11.3.min.js"></script>
  <script type="text/javascript" src="/js/jq_mathjax_parse.js"></script>
  <script type="text/javascript" src="/js/jquery.toc.min.js"></script>

  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Wen-Ting Wang's Blog</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
        
          
        
          
        
          
						<a class="page-link" href="/about/">About Me</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
						<a class="page-link" href="/resources/">Resources</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <a class="page-link" href="/tags/bioinfo/">Bioinformatics</a>
        <a class="page-link" href="/tags/cancer/">Cancer</a>
        <a class="page-link" href="/tags/R/">R</a>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        


<div class="post">

  <header class="post-header">
    <h1 class="post-title">Using Bioconductor in a Conda Environment</h1>
    <p class="post-meta">Nov 12, 2016</p>
    <p id="post-meta"><i class="fa fa-tags"></i>: <a href="/tags/conda/">Conda</a>, <a href="/tags/bioconductor/">Bioconductor</a>, <a href="/tags/geoquery/">GEOquery</a></p>
  </header>

  <article class="post-content">
    <p>I recently switched over to using the <a href="http://conda.pydata.org/docs/">conda package management system</a> for R. One of the benefits of conda is that package installation can be performed very easily with the command:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>conda install -c r r-<span class="o">{</span>name_of_package<span class="o">}</span>
</code></pre>
</div>

<p>One of the particular <a href="http://conda.pydata.org/docs/custom-channels.html">channels</a> is bioconda which is focused on providing bioinformatics packages. From my understanding they are the ones responsible for uploading <a href="https://www.bioconductor.org/">bioconductor packages</a> to the conda cloud (where all the package binaries sit).</p>

<p>Recently, I needed to install the <a href="https://www.bioconductor.org/packages/release/bioc/html/GEOquery.html">bioconductor package GEOquery</a> which can be installed from conda with the following command:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>conda install -c bioconda bioconductor-geoquery
</code></pre>
</div>

<p>At the time of this writing, the current version is 2.38.4. As it turns out the NCBI, recently changed all http links to be https only resulting in this new version not working. The latest version that is on bioconductor was 2.4, and so I thought maybe the easiest thing to do was to just install it without going through conda:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">source</span><span class="p">(</span><span class="s2">"https://bioconductor.org/biocLite.R"</span><span class="p">)</span><span class="w">
</span><span class="n">biocLite</span><span class="p">(</span><span class="s2">"GEOquery"</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>Only I ran into error:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;</span><span class="w"> </span><span class="n">source</span><span class="p">(</span><span class="s2">"https://bioconductor.org/biocLite.R"</span><span class="p">)</span><span class="w">
</span><span class="n">Error</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> </span><span class="n">encoding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">encoding</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w">
  </span><span class="n">cannot</span><span class="w"> </span><span class="n">open</span><span class="w"> </span><span class="n">connection</span><span class="w">
</span><span class="n">In</span><span class="w"> </span><span class="n">addition</span><span class="o">:</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="n">message</span><span class="o">:</span><span class="w">
</span><span class="n">In</span><span class="w"> </span><span class="n">file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="s2">"r"</span><span class="p">,</span><span class="w"> </span><span class="n">encoding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">encoding</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w">
  </span><span class="n">URL</span><span class="w"> </span><span class="s1">'https://bioconductor.org/biocLite.R'</span><span class="o">:</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="s1">'Problem with the SSL CA cert (path? access rights?)'</span><span class="w">
</span></code></pre>
</div>

<p>It seems like the issue is that the SSL CA certificate canâ€™t be found? A little googling revealed this <a href="https://social.technet.microsoft.com/Forums/systemcenter/en-US/5d9f2b71-b1da-4006-8485-608bfab8815a/installing-bioconductor?forum=ropen&lt;Paste&gt;">helpful post</a>. Then it clued into me. I was in a conda environment (geo_test) and so the <code class="highlighter-rouge">https://bioconductor.org/biocLite.R</code> must not be recognize that and thus not be able to find the <code class="highlighter-rouge">.pem</code> file it needs.</p>

<p>Searching in my conda environment revealed a <code class="highlighter-rouge">cacert.pem</code> file to be located at:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>/Users/fongchun/miniconda2/envs/geo_test/ssl/cacert.pem
</code></pre>
</div>

<p>And so in R, I ran the following command:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">Sys.setenv</span><span class="p">(</span><span class="n">CURL_CA_BUNDLE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/Users/fongchun/miniconda2/envs/geo_test/ssl/cacert.pem"</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>And then I tried to install the latest version of GEOquery from bioconductor again:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">source</span><span class="p">(</span><span class="s2">"https://bioconductor.org/biocLite.R"</span><span class="p">)</span><span class="w">
</span><span class="n">biocLite</span><span class="p">(</span><span class="s2">"GEOquery"</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>And success! Hopefully this post helps you solve this SSL problem should you encounter this yourself when using bioconductor in a conda environment.</p>

<div class="alert alert-warning" role="alert">
<h4>Important Note</h4>
I should note that this isn't really the "correct" thing to do it. I should be building the latest version and then submitted it to bioconda. But hey...I am a graduate student and I was in a time crunch :)
</div>


    <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'tinyheero';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Wen-Ting Wang's Blog</li>
          <li>
             <i class="fa fa-envelope"></i>
             <a href="mailto:egpivo@gmail.com">egpivo@gmail.com</a>
          </li>
					<li>
						<a href="http://orcid.org">
							<img src="http://about.orcid.org/sites/default/files/images/orcid_16x16(1).gif" style="width: 15px; height: 15px; ">
						</a>
						<a href="http://orcid.org/0000-0002-7825-2692"><span class="usename">orcid.org/0000-0002-7825-2692</span></a>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
              <i class="fa fa-github"></i>
              <a href="https://github.com/egpivo"><span class="username">egpivo</span></a>
          </li>
          

          
          <li>
            <i class="fa fa-linkedin"></i>
            <a href="https://ca.linkedin.com/in/fongchunchan"><span class="username">fongchunchan</span></a>
          </li>
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">Science is a means whereby learning is achieved.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
