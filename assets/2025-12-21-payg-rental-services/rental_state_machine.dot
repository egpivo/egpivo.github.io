digraph RentalStateMachine {
  graph [
    rankdir=TB,
    bgcolor=white,
    fontname="Helvetica",
    fontsize=12,
    labelloc="t",
    label="Exclusive Rental: State Machine"
  ];

  node [
    shape=box,
    style="rounded,filled",
    fontname="Helvetica",
    fontsize=12,
    margin="0.4,0.3"
  ];

  edge [
    color="#4B5563",
    penwidth=2,
    arrowsize=1.0,
    fontname="Helvetica",
    fontsize=11
  ];

  Available [
    label="Available",
    fillcolor="#DCFCE7",
    color="#16A34A"
  ];

  Occupied [
    label="Occupied\n(currentRenter set)\n(exclusiveUntil > now)",
    fillcolor="#FEE2E2",
    color="#DC2626"
  ];

  Available -> Occupied [
    label="rent()\nchecks exclusiveUntil",
    color="#16A34A",
    penwidth=2.5
  ];

  Occupied -> Available [
    label="expiry / release\n(auto unlock)",
    color="#F59E0B",
    penwidth=2.5
  ];

  // Notes
  Note1 [
    label="No calendar\nNo future booking",
    shape=note,
    fillcolor="#FFF7ED",
    color="#F97316",
    fontcolor="#9A3412",
    fontsize=10,
    style=filled
  ];

  Occupied -> Note1 [
    style=invis,
    constraint=false
  ];
}
