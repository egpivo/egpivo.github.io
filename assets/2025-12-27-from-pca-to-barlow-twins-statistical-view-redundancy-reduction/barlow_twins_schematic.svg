<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="420" viewBox="0 0 1200 420" role="img" aria-label="Barlow Twins schematic: input image to two augmentations, shared network, embeddings, cross-correlation, and identity target.">
  <defs>
    <style>
      .box { fill: #ffffff; stroke: #111827; stroke-width: 2; rx: 10; ry: 10; }
      .soft { fill: #eff6ff; stroke: #2563eb; stroke-width: 2; rx: 12; ry: 12; }
      .txt { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; fill: #111827; }
      .small { font-size: 16px; }
      .mid { font-size: 20px; font-weight: 600; }
      .big { font-size: 26px; font-weight: 700; }
      .muted { fill: #374151; }
    </style>
    <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 L12,6 L0,12 Z" fill="#111827"/>
    </marker>
    <marker id="arrowBlue" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 L12,6 L0,12 Z" fill="#2563eb"/>
    </marker>
  </defs>

  <!-- Title -->
  <text class="txt big" x="30" y="46">Barlow Twins (loss schematic)</text>
  <text class="txt small muted" x="30" y="74">Two augmented views, shared network, cross-correlation, identity target</text>

  <!-- X -->
  <rect class="box" x="30" y="150" width="110" height="110"/>
  <text class="txt big" x="85" y="215" text-anchor="middle">X</text>
  <text class="txt small muted" x="85" y="282" text-anchor="middle">image</text>

  <!-- Split arrows -->
  <path d="M140 180 C185 180, 190 140, 220 130" stroke="#111827" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>
  <path d="M140 230 C185 230, 190 270, 220 280" stroke="#111827" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>

  <!-- Augmentations -->
  <rect class="box" x="220" y="95" width="130" height="80"/>
  <text class="txt mid" x="285" y="130" text-anchor="middle">Y<tspan baseline-shift="super" font-size="14">A</tspan></text>
  <text class="txt small muted" x="285" y="155" text-anchor="middle">view A</text>

  <rect class="box" x="220" y="240" width="130" height="80"/>
  <text class="txt mid" x="285" y="275" text-anchor="middle">Y<tspan baseline-shift="super" font-size="14">B</tspan></text>
  <text class="txt small muted" x="285" y="300" text-anchor="middle">view B</text>

  <!-- Shared network -->
  <rect class="soft" x="400" y="145" width="240" height="120"/>
  <text class="txt mid" x="520" y="190" text-anchor="middle">shared network</text>
  <text class="txt small muted" x="520" y="216" text-anchor="middle">encoder + projector</text>
  <text class="txt small" x="520" y="245" text-anchor="middle">f<tspan baseline-shift="sub" font-size="14">θ</tspan>(·)</text>

  <!-- Arrows to shared network -->
  <path d="M350 135 L400 170" stroke="#111827" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>
  <path d="M350 280 L400 240" stroke="#111827" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>

  <!-- Embeddings -->
  <path d="M640 205 L710 140" stroke="#111827" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>
  <path d="M640 205 L710 270" stroke="#111827" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>

  <rect class="box" x="710" y="105" width="120" height="80"/>
  <text class="txt mid" x="770" y="150" text-anchor="middle">Z<tspan baseline-shift="super" font-size="14">A</tspan></text>
  <text class="txt small muted" x="770" y="175" text-anchor="middle">embedding</text>

  <rect class="box" x="710" y="235" width="120" height="80"/>
  <text class="txt mid" x="770" y="280" text-anchor="middle">Z<tspan baseline-shift="super" font-size="14">B</tspan></text>
  <text class="txt small muted" x="770" y="305" text-anchor="middle">embedding</text>

  <!-- Cross-correlation -->
  <path d="M830 145 C880 145, 885 170, 930 175" stroke="#111827" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>
  <path d="M830 275 C880 275, 885 250, 930 245" stroke="#111827" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>

  <rect class="box" x="930" y="150" width="140" height="120"/>
  <text class="txt mid" x="1000" y="190" text-anchor="middle">C</text>
  <text class="txt small muted" x="1000" y="214" text-anchor="middle">cross-corr</text>
  <text class="txt small muted" x="1000" y="238" text-anchor="middle">Corr(Z<tspan baseline-shift="super" font-size="12">A</tspan>, Z<tspan baseline-shift="super" font-size="12">B</tspan>)</text>

  <!-- Identity target -->
  <path d="M1070 210 L1100 210" stroke="#2563eb" stroke-width="3" fill="none" marker-end="url(#arrowBlue)"/>
  <rect class="box" x="1100" y="170" width="90" height="80"/>
  <text class="txt mid" x="1145" y="215" text-anchor="middle">I</text>
  <text class="txt small muted" x="1145" y="238" text-anchor="middle">target</text>

  <!-- Loss annotation -->
  <text class="txt mid" x="1000" y="320" text-anchor="middle">minimize ‖C − I‖</text>
  <text class="txt small muted" x="1000" y="345" text-anchor="middle">(diag → 1, off-diag → 0)</text>
</svg>
